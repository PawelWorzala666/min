var _n=document.getElementById('my_Canvas');gl=_n.getContext('experimental-webgl');var _z=[-1,-1,-1,1,-1,-1,1,1,-1,-1,1,-1,-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,1,-1,1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,];var _m=[5,3,7,5,3,7,5,3,7,5,3,7,1,1,3,1,1,3,1,1,3,1,1,3,0,0,1,0,0,1,0,0,1,0,0,1,1,0,0,1,0,0,1,0,0,1,0,0,1,1,0,1,1,0,1,1,0,1,1,0,0,1,0,0,1,0,0,1,0,0,1,0];var _s=[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23];var _bm=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,_bm);gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(_z),gl.STATIC_DRAW);var _bk=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,_bk);gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(_m),gl.STATIC_DRAW);var _bj=gl.createBuffer();gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,_bj);gl.bufferData(gl.ELEMENT_ARRAY_BUFFER,new Uint16Array(_s),gl.STATIC_DRAW);var _y='attribute vec3 position;'+'uniform mat4 Pmatrix;'+'uniform mat4 Vmatrix;'+'uniform mat4 Mmatrix;'+'attribute vec3 color;'+'varying vec3 vColor;'+'void main(void){'+'gl_Position=Pmatrix*Vmatrix*Mmatrix*vec4(position,1.);'+'vColor=color;'+'}';var _x='precision mediump float;'+'varying vec3 vColor;'+'void main(void){'+'gl_FragColor=vec4(vColor,1.);'+'}';var _bf=gl.createShader(gl.VERTEX_SHADER);gl.shaderSource(_bf,_y);gl.compileShader(_bf);var _be=gl.createShader(gl.FRAGMENT_SHADER);gl.shaderSource(_be,_x);gl.compileShader(_be);var _bl=gl.createProgram();gl.attachShader(_bl,_bf);gl.attachShader(_bl,_be);gl.linkProgram(_bl);var _w=gl.getUniformLocation(_bl,"Pmatrix");var _v=gl.getUniformLocation(_bl,"Vmatrix");var _u=gl.getUniformLocation(_bl,"Mmatrix");gl.bindBuffer(gl.ARRAY_BUFFER,_bm);var _bd=gl.getAttribLocation(_bl,"position");gl.vertexAttribPointer(_bd,3,gl.FLOAT,false,0,0);gl.enableVertexAttribArray(_bd);gl.bindBuffer(gl.ARRAY_BUFFER,_bk);var _l=gl.getAttribLocation(_bl,"color");gl.vertexAttribPointer(_l,3,gl.FLOAT,false,0,0) ;gl.enableVertexAttribArray(_l);gl.useProgram(_bl);function _bn(_i,a,_g,_f){var _e=Math.tan((_i*.5)*Math.PI/180);return [0.5/_e,0 ,0,0,0,0.5*a/_e,0,0,0,0,-(_f+_g)/(_f-_g),-1,0,0,(-2*_f*_g)/(_f-_g),0];};var _bh=_bn(40,_n.width/_n.height,1,100);var _bc=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];var _bg=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];_bg[14]=_bg[14]-6;var _bi=0.95;var _h=false;var _k,old_y;var _b=0,dY=0;var _bb=function(e){_h=true;_k=e.pageX,old_y=e.pageY;e.preventDefault();return false;};var _r=function(e){_h=false;};var _ba=function(e){if(!_h) return false;_b=(e.pageX-_k)*2*Math.PI/_n.width,dY=(e.pageY-old_y)*2*Math.PI/_n.height;_j+= _b;PHI+=dY;_k=e.pageX,old_y=e.pageY;e.preventDefault();};_n.addEventListener("mousedown",_bb,false);_n.addEventListener("mouseup",_r,false);_n.addEventListener("mouseout",_r,false);_n.addEventListener("mousemove",_ba,false);function _p(m,_i){var c=Math.cos(_i);var s=Math.sin(_i);var _d=m[1],mv5=m[5],mv9=m[9];m[1]=m[1]*c-m[2]*s;m[5]=m[5]*c-m[6]*s;m[9]=m[9]*c-m[10]*s;m[2]=m[2]*c+_d*s;m[6]=m[6]*c+mv5*s;m[10]=m[10]*c+mv9*s;};function _o(m,_i){var c=Math.cos(_i);var s=Math.sin(_i);var _c=m[0],mv4=m[4],mv8=m[8];m[0]=c*m[0]+s*m[2];m[4]=c*m[4]+s*m[6];m[8]=c*m[8]+s*m[10];m[2]=c*m[2]-s*_c;m[6]=c*m[6]-s*mv4;m[10]=c*m[10]-s*mv8;};var _j=0,PHI=0;var _t=0;var _q=function(time){var _a=time-_t;if(!_h){_b *= _bi,dY*=_bi;_j+=_b,PHI+=dY;};_bc[0]=1,_bc[1]=0,_bc[2]=0,_bc[3]=0,_bc[4]=0,_bc[5]=1,_bc[6]=0,_bc[7]=0,_bc[8]=0,_bc[9]=0,_bc[10]=1,_bc[11]=0,_bc[12]=0,_bc[13]=0,_bc[14]=0,_bc[15]=1;_o(_bc,_j);_p(_bc,PHI);_t=time;gl.enable(gl.DEPTH_TEST);gl.clearColor(0.5,0.5,0.5,0.9);gl.clearDepth(1.0);gl.viewport(0.0,0.0,_n.width,_n.height);gl.clear(gl.COLOR_BUFFER_BIT|gl.DEPTH_BUFFER_BIT);gl.uniformMatrix4fv(_w,false,_bh);gl.uniformMatrix4fv(_v,false,_bg);gl.uniformMatrix4fv(_u,false,_bc);gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,_bj);gl.drawElements(gl.TRIANGLES,_s.length,gl.UNSIGNED_SHORT,0);window.requestAnimationFrame(_q);};_q(0);